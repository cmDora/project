webpackJsonp([10],{FpwW:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("T4f3"),l=o.n(a),s=o("Juwi"),i={data:function(){return{modal1:!1,modal2:!1,formItem:{title:"",msg:"",food:"",icon:"",child:[]},cityList:[{value:"New York",label:"New York"},{value:"London",label:"London"},{value:"Sydney",label:"Sydney"},{value:"Ottawa",label:"Ottawa"},{value:"Paris",label:"Paris"},{value:"Canberra",label:"Canberra"}],child_id:null,food_data:[]}},created:function(){var t=this;s.a.get("/api/get_classify",{}).then(function(e){e.result.forEach(function(t){t.shop_child=t.shop_child.split(",")}),t.food_data=e.result})},methods:{ok:function(){var t=this;this.$Message.info("Clicked ok"),s.a.post("/api/classify",l()({},this.formItem)).then(function(e){"ok"==e.msg&&s.a.get("/api/get_classify",{}).then(function(e){e.result.forEach(function(t){t.shop_child=t.shop_child.split(",")}),t.food_data=e.result})})},ok2:function(){var t=this;this.$Message.info("Clicked ok"),s.a.post("/api/get_child",{child:this.formItem.child,id:this.child_id}).then(function(e){200==e.status&&s.a.get("/api/get_classify",{}).then(function(e){e.result.forEach(function(t){t.shop_child=t.shop_child.split(",")}),t.food_data=e.result})})},cancel:function(){this.$Message.info("Clicked cancel")},modalShow:function(){this.modal1||(this.modal1=!0)},modalShowChild:function(t){this.modal2||(this.modal2=!0),this.child_id=t},fileSuccess:function(t,e){this.formItem.icon="http://47.94.19.116:9001/"+t.url},beforeUploads:function(t){return!0}}},n={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("header",{staticClass:"header",staticStyle:{"border-bottom":"1px solid #ccc"}},[o("span",[t._v("分类管理")]),t._v(" "),o("Button",{attrs:{type:"primary"},on:{click:t.modalShow}},[t._v("添加分类")])],1),t._v(" "),o("table",{staticClass:"table",staticStyle:{"margin-top":"15px"},attrs:{border:"0",cellspacing:"0"}},[t._m(0),t._v(" "),t._l(t.food_data,function(e,a){return o("tbody",{key:a,staticClass:"tbody"},[o("tr",{staticClass:"shopFather"},[o("td",[o("img",{staticClass:"img",attrs:{src:e.shop_img}})]),t._v(" "),o("td",[t._v(t._s(e.shop_title))]),t._v(" "),o("td",[t._v(t._s(e.shop_msg))]),t._v(" "),o("td",[t._v(t._s(e.shop_food))]),t._v(" "),o("td",{staticClass:"edit"},[o("Button",{attrs:{type:"primary"},on:{click:function(o){t.modalShowChild(e.id)}}},[t._v("添加子类")]),t._v(" "),o("Button",{attrs:{type:"warning"}},[t._v("修改")]),t._v(" "),o("Button",{attrs:{type:"error"}},[t._v("删除")])],1)]),t._v(" "),t._m(1,!0),t._v(" "),o("tr",{staticClass:"shopChild"},[o("td",{attrs:{colspan:"3"}},[t._v("全部")]),t._v(" "),o("td",{attrs:{colspan:"3"}},t._l(e.shop_child,function(e,a){return o("span",[t._v(t._s(e))])}))])])})],2),t._v(" "),o("Modal",{attrs:{title:"添加父类"},on:{"on-ok":t.ok,"on-cancel":t.cancel},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[o("Form",{attrs:{model:t.formItem,"label-width":80}},[o("FormItem",{attrs:{label:"商店名称"}},[o("Input",{model:{value:t.formItem.title,callback:function(e){t.$set(t.formItem,"title",e)},expression:"formItem.title"}})],1),t._v(" "),o("FormItem",{attrs:{label:"信息描述"}},[o("Input",{model:{value:t.formItem.msg,callback:function(e){t.$set(t.formItem,"msg",e)},expression:"formItem.msg"}})],1),t._v(" "),o("FormItem",{attrs:{label:"子类信息"}},[o("Select",{staticStyle:{width:"260px"},attrs:{multiple:""},model:{value:t.formItem.child,callback:function(e){t.$set(t.formItem,"child",e)},expression:"formItem.child"}},t._l(t.cityList,function(e){return o("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1),t._v(" "),o("FormItem",{attrs:{label:"选择食物"}},[o("Select",{model:{value:t.formItem.food,callback:function(e){t.$set(t.formItem,"food",e)},expression:"formItem.food"}},[o("Option",{attrs:{value:"果冻"}},[t._v("果冻")]),t._v(" "),o("Option",{attrs:{value:"巧克力"}},[t._v("巧克力")]),t._v(" "),o("Option",{attrs:{value:"鸡肉"}},[t._v("鸡肉")])],1)],1)],1),t._v(" "),o("Upload",{attrs:{action:"/api/upload","on-success":t.fileSuccess,"before-upload":t.beforeUploads,"show-file-list":!1}},[t.formItem.icon?o("img",{staticClass:"img",attrs:{src:t.formItem.icon}}):o("Button",{attrs:{type:"ghost",icon:"ios-cloud-upload-outline"}},[t._v("Upload files")])],1)],1),t._v(" "),o("Modal",{attrs:{title:"添加子类"},on:{"on-ok":t.ok2,"on-cancel":t.cancel},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[o("Form",{attrs:{model:t.formItem,"label-width":80}},[o("FormItem",{attrs:{label:"子类信息"}},[o("Select",{staticStyle:{width:"260px"},attrs:{multiple:""},model:{value:t.formItem.child,callback:function(e){t.$set(t.formItem,"child",e)},expression:"formItem.child"}},t._l(t.cityList,function(e){return o("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1)],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("thead",{staticClass:"thead"},[o("tr",[o("th",[t._v("图标")]),t._v(" "),o("th",[t._v("名称")]),t._v(" "),o("th",[t._v("描述")]),t._v(" "),o("th",[t._v("食物")]),t._v(" "),o("th",[t._v("操作")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"child"},[e("td",{attrs:{colspan:"5"}},[this._v("子类")])])}]};var c=o("/4AN")(i,n,!1,function(t){o("nNK8")},"data-v-a000c970",null);e.default=c.exports},nNK8:function(t,e){}});
//# sourceMappingURL=10.836fbb8f325cbd1226eb.js.map